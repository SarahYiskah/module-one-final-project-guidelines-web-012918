require 'rest-client'
require 'json'
require 'require_all'
require 'pry'
require_relative "city.rb"
require 'unirest'


def get_cities
#make the web request

response = [{"city":"Kabul","country":"Afghanistan","countryCode":"AF","id":34052,"latitude":34.52813,"longitude":69.17233,"region":"Kabul","regionCode":"KAB"},{"city":"Buenos Aires","country":"Argentina","countryCode":"AR","id":115407,"latitude":-34.61315,"longitude":-58.37723,"region":"Ciudad de Buenos Aires","regionCode":"C"},{"city":"Melbourne","country":"Australia","countryCode":"AU","id":31373,"latitude":-37.814,"longitude":144.96332,"region":"Victoria","regionCode":"VIC"},{"city":"Sydney","country":"Australia","countryCode":"AU","id":94674,"latitude":-33.86785,"longitude":151.20732,"region":"New South Wales","regionCode":"NSW"},{"city":"Chittagong","country":"Bangladesh","countryCode":"BD","id":91156,"latitude":22.3384,"longitude":91.83168,"regionCode":"84"},{"city":"Dhaka","country":"Bangladesh","countryCode":"BD","id":14772,"latitude":23.7104,"longitude":90.40744,"regionCode":"81"},{"city":"Rio de Janeiro","country":"Brazil","countryCode":"BR","id":26328,"latitude":-22.90278,"longitude":-43.2075,"region":"Rio de Janeiro","regionCode":"RJ"},{"city":"São Paulo","country":"Brazil","countryCode":"BR","id":104628,"latitude":-23.5475,"longitude":-46.63611,"region":"São Paulo","regionCode":"SP"},{"city":"Kinshasa","country":"Congo, the Democratic Republic of the","countryCode":"CD","id":17932,"latitude":-4.32758,"longitude":15.31357},{"city":"Abidjan","country":"Côte d'Ivoire","countryCode":"CI","id":108840,"latitude":5.30966,"longitude":-4.01266,"region":"Abidjan","regionCode":"AB"},{"city":"Santiago","country":"Chile","countryCode":"CL","id":42148,"latitude":-33.45694,"longitude":-70.64827,"region":"Región Metropolitana de Santiago","regionCode":"RM"},{"city":"Beijing","country":"China","countryCode":"CN","id":99452,"latitude":39.9075,"longitude":116.39723,"region":"Beijing","regionCode":"BJ"},{"city":"Changchun","country":"China","countryCode":"CN","id":33142,"latitude":43.88,"longitude":125.32278,"region":"Jilin","regionCode":"JL"},{"city":"Changsha","country":"China","countryCode":"CN","id":112153,"latitude":28.19874,"longitude":112.97087,"region":"Hunan","regionCode":"HN"},{"city":"Chengdu","country":"China","countryCode":"CN","id":26049,"latitude":30.66667,"longitude":104.06667,"region":"Sichuan","regionCode":"SC"},{"city":"Chongqing","country":"China","countryCode":"CN","id":41845,"latitude":29.56278,"longitude":106.55278,"region":"Chongqing","regionCode":"CQ"},{"city":"Dalian","country":"China","countryCode":"CN","id":91830,"latitude":38.91222,"longitude":121.60222,"region":"Liaoning","regionCode":"LN"},{"city":"Dongguan","country":"China","countryCode":"CN","id":106436,"latitude":23.01797,"longitude":113.74866,"region":"Guangdong","regionCode":"GD"},{"city":"Foshan","country":"China","countryCode":"CN","id":8485,"latitude":23.02677,"longitude":113.13148,"region":"Guangdong","regionCode":"GD"},{"city":"Guangzhou","country":"China","countryCode":"CN","id":56509,"latitude":23.11667,"longitude":113.25,"region":"Guangdong","regionCode":"GD"},{"city":"Hangzhou","country":"China","countryCode":"CN","id":76794,"latitude":30.29365,"longitude":120.16142,"region":"Zhejiang","regionCode":"ZJ"},{"city":"Harbin","country":"China","countryCode":"CN","id":86557,"latitude":45.75,"longitude":126.65,"region":"Heilongjiang","regionCode":"HL"},{"city":"Hefei","country":"China","countryCode":"CN","id":68337,"latitude":31.86389,"longitude":117.28083,"region":"Anhui","regionCode":"AH"},{"city":"Jinan","country":"China","countryCode":"CN","id":86179,"latitude":36.66833,"longitude":116.99722,"region":"Shandong","regionCode":"SD"},{"city":"Kunming","country":"China","countryCode":"CN","id":62624,"latitude":25.03889,"longitude":102.71833,"region":"Yunnan","regionCode":"YN"},{"city":"Nanchong","country":"China","countryCode":"CN","id":37845,"latitude":30.79508,"longitude":106.08473,"region":"Sichuan","regionCode":"SC"},{"city":"Nanjing","country":"China","countryCode":"CN","id":3814,"latitude":32.06167,"longitude":118.77778,"region":"Jiangsu","regionCode":"JS"},{"city":"Ningbo","country":"China","countryCode":"CN","id":106516,"latitude":29.87819,"longitude":121.54945,"region":"Zhejiang","regionCode":"ZJ"},{"city":"Puyang","country":"China","countryCode":"CN","id":71186,"latitude":29.45679,"longitude":119.88872,"region":"Zhejiang","regionCode":"ZJ"},{"city":"Qingdao","country":"China","countryCode":"CN","id":40690,"latitude":36.06488,"longitude":120.38042,"region":"Shandong","regionCode":"SD"},{"city":"Shanghai","country":"China","countryCode":"CN","id":101692,"latitude":31.22222,"longitude":121.45806,"region":"Shanghai","regionCode":"SH"},{"city":"Shantou","country":"China","countryCode":"CN","id":66778,"latitude":23.36814,"longitude":116.71479,"region":"Guangdong","regionCode":"GD"},{"city":"Shenyang","country":"China","countryCode":"CN","id":115208,"latitude":41.79222,"longitude":123.43278,"region":"Liaoning","regionCode":"LN"},{"city":"Shenzhen","country":"China","countryCode":"CN","id":56444,"latitude":22.54554,"longitude":114.0683,"region":"Guangdong","regionCode":"GD"},{"city":"Shijiazhuang","country":"China","countryCode":"CN","id":81989,"latitude":38.04139,"longitude":114.47861,"region":"Hebei","regionCode":"HB"},{"city":"Shiyan","country":"China","countryCode":"CN","id":105913,"latitude":32.6475,"longitude":110.77806,"region":"Hubei","regionCode":"HU"},{"city":"Suzhou","country":"China","countryCode":"CN","id":81186,"latitude":31.30408,"longitude":120.59538,"region":"Jiangsu","regionCode":"JS"},{"city":"Taiyuan","country":"China","countryCode":"CN","id":84348,"latitude":37.86944,"longitude":112.56028,"region":"Shanxi","regionCode":"SX"},{"city":"Tai’an","country":"China","countryCode":"CN","id":39944,"latitude":36.18528,"longitude":117.12,"region":"Shandong","regionCode":"SD"},{"city":"Tangshan","country":"China","countryCode":"CN","id":27876,"latitude":39.63333,"longitude":118.18333,"region":"Hebei","regionCode":"HB"},{"city":"Tianjin","country":"China","countryCode":"CN","id":83945,"latitude":39.14222,"longitude":117.17667,"region":"Tianjin","regionCode":"TJ"},{"city":"Tianshui","country":"China","countryCode":"CN","id":12313,"latitude":34.57952,"longitude":105.74238,"region":"Gansu","regionCode":"GS"},{"city":"Wuhan","country":"China","countryCode":"CN","id":4115,"latitude":30.58333,"longitude":114.26667,"region":"Hubei","regionCode":"HU"},{"city":"Wuxi","country":"China","countryCode":"CN","id":77299,"latitude":31.56887,"longitude":120.28857,"region":"Jiangsu","regionCode":"JS"},{"city":"Xiamen","country":"China","countryCode":"CN","id":106823,"latitude":24.47979,"longitude":118.08187,"region":"Fujian","regionCode":"FJ"},{"city":"Xi’an","country":"China","countryCode":"CN","id":2954,"latitude":34.25833,"longitude":108.92861,"region":"Shaanxi","regionCode":"SA"},{"city":"Zhengzhou","country":"China","countryCode":"CN","id":70570,"latitude":34.75778,"longitude":113.64861,"region":"Henan","regionCode":"HE"},{"city":"Zhongshan","country":"China","countryCode":"CN","id":37967,"latitude":21.31992,"longitude":110.5723,"region":"Guangdong","regionCode":"GD"},{"city":"Zibo","country":"China","countryCode":"CN","id":15985,"latitude":36.79056,"longitude":118.06333,"region":"Shandong","regionCode":"SD"},{"city":"Ürümqi","country":"China","countryCode":"CN","id":6442,"latitude":43.80096,"longitude":87.60046,"region":"Xinjiang Uygur","regionCode":"XJ"},{"city":"Bogotá","country":"Colombia","countryCode":"CO","id":87265,"latitude":4.60971,"longitude":-74.08175,"region":"Distrito Capital","regionCode":"DC"},{"city":"Berlin","country":"Germany","countryCode":"DE","id":95541,"latitude":52.52437,"longitude":13.41053,"region":"Berlin","regionCode":"BE"},{"city":"Alexandria","country":"Egypt","countryCode":"EG","id":108053,"latitude":31.20176,"longitude":29.91582,"region":"Al Iskandarīyah","regionCode":"ALX"},{"city":"Cairo","country":"Egypt","countryCode":"EG","id":91273,"latitude":30.06263,"longitude":31.24967,"region":"Al Qāhirah","regionCode":"C"},{"city":"Madrid","country":"Spain","countryCode":"ES","id":75830,"latitude":40.4165,"longitude":-3.70256,"regionCode":"29"},{"city":"London","country":"United Kingdom","countryCode":"GB","id":38515,"latitude":51.50853,"longitude":-0.12574,"regionCode":"ENG"},{"city":"Hong Kong","country":"Hong Kong","countryCode":"HK","id":83071,"latitude":22.27832,"longitude":114.17469,"regionCode":"HCW"},{"city":"Jakarta","country":"Indonesia","countryCode":"ID","id":80413,"latitude":-6.21462,"longitude":106.84513,"region":"Jakarta Raya","regionCode":"JK"},{"city":"Ahmedabad","country":"India","countryCode":"IN","id":61066,"latitude":23.02579,"longitude":72.58727,"region":"Gujarat","regionCode":"GJ"},{"city":"Bengaluru","country":"India","countryCode":"IN","id":113510,"latitude":12.97194,"longitude":77.59369,"region":"Karnataka","regionCode":"KA"},{"city":"Chennai","country":"India","countryCode":"IN","id":82743,"latitude":13.08784,"longitude":80.27847,"region":"Tamil Nadu","regionCode":"TN"},{"city":"Delhi","country":"India","countryCode":"IN","id":93063,"latitude":28.65195,"longitude":77.23149,"region":"Delhi","regionCode":"DL"},{"city":"Hyderabad","country":"India","countryCode":"IN","id":20709,"latitude":17.38405,"longitude":78.45636,"region":"Telangana","regionCode":"TG"},{"city":"Kanpur","country":"India","countryCode":"IN","id":48281,"latitude":26.46523,"longitude":80.34975,"region":"Uttar Pradesh","regionCode":"UP"},{"city":"Kolkata","country":"India","countryCode":"IN","id":49428,"latitude":22.56263,"longitude":88.36304,"region":"West Bengal","regionCode":"WB"},{"city":"Mumbai","country":"India","countryCode":"IN","id":113436,"latitude":19.07283,"longitude":72.88261,"region":"Maharashtra","regionCode":"MH"},{"city":"Pune","country":"India","countryCode":"IN","id":29968,"latitude":18.51957,"longitude":73.85535,"region":"Maharashtra","regionCode":"MH"},{"city":"Sūrat","country":"India","countryCode":"IN","id":80925,"latitude":21.19594,"longitude":72.83023,"region":"Gujarat","regionCode":"GJ"},{"city":"Baghdad","country":"Iraq","countryCode":"IQ","id":14311,"latitude":33.34058,"longitude":44.40088,"region":"Baghdad","regionCode":"BG"},{"city":"Tehran","country":"Iran, Islamic Republic of","countryCode":"IR","id":52798,"latitude":35.69439,"longitude":51.42151,"region":"Tehran","regionCode":"07"},{"city":"Tokyo","country":"Japan","countryCode":"JP","id":81668,"latitude":35.6895,"longitude":139.69171,"region":"Tokyo","regionCode":"13"},{"city":"Yokohama","country":"Japan","countryCode":"JP","id":23959,"latitude":35.43333,"longitude":139.65,"region":"Kanagawa","regionCode":"14"},{"city":"Pyongyang","country":"Korea, Democratic People's Republic of","countryCode":"KP","id":23982,"latitude":39.03385,"longitude":125.75432,"regionCode":"12"},{"city":"Busan","country":"Korea, Republic of","countryCode":"KR","id":108394,"latitude":35.10278,"longitude":129.04028,"region":"Busan","regionCode":"26"},{"city":"Seoul","country":"Korea, Republic of","countryCode":"KR","id":57373,"latitude":37.566,"longitude":126.9784,"region":"Seoul","regionCode":"11"},{"city":"Casablanca","country":"Morocco","countryCode":"MA","id":81199,"latitude":33.58831,"longitude":-7.61138,"region":"Casablanca-Settat","regionCode":"CS"},{"city":"Yangon","country":"Myanmar","countryCode":"MM","id":2098,"latitude":16.80528,"longitude":96.15611,"region":"Yangon","regionCode":"06"},{"city":"Mexico City","country":"Mexico","countryCode":"MX","id":89186,"latitude":19.42847,"longitude":-99.12766,"region":"Ciudad de México","regionCode":"DIF"},{"city":"Ibadan","country":"Nigeria","countryCode":"NG","id":8531,"latitude":7.37756,"longitude":3.90591,"region":"Oyo","regionCode":"OY"},{"city":"Kano","country":"Nigeria","countryCode":"NG","id":55477,"latitude":12.00012,"longitude":8.51672,"region":"Kano","regionCode":"KN"},{"city":"Lagos","country":"Nigeria","countryCode":"NG","id":46218,"latitude":6.45407,"longitude":3.39467,"region":"Lagos","regionCode":"LA"},{"city":"Lima","country":"Peru","countryCode":"PE","id":90119,"latitude":-12.04318,"longitude":-77.02824,"region":"Lima [Province]","regionCode":"LMA"},{"city":"Karachi","country":"Pakistan","countryCode":"PK","id":94470,"latitude":24.8608,"longitude":67.0104,"region":"Sindh","regionCode":"SD"},{"city":"Lahore","country":"Pakistan","countryCode":"PK","id":4607,"latitude":31.558,"longitude":74.35071,"region":"Punjab","regionCode":"PB"},{"city":"Moscow","country":"Russian Federation","countryCode":"RU","id":103029,"latitude":55.75222,"longitude":37.61556,"region":"Moscow City","regionCode":"MOW"},{"city":"Saint Petersburg","country":"Russian Federation","countryCode":"RU","id":26600,"latitude":59.93863,"longitude":30.31413,"region":"Saint Petersburg City","regionCode":"SPE"},{"city":"Jeddah","country":"Saudi Arabia","countryCode":"SA","id":73029,"latitude":21.54238,"longitude":39.19797,"region":"Makkah","regionCode":"02"},{"city":"Riyadh","country":"Saudi Arabia","countryCode":"SA","id":48603,"latitude":24.68773,"longitude":46.72185,"region":"Ar Riyāḍ","regionCode":"01"},{"city":"Singapore","country":"Singapore","countryCode":"SG","id":7380,"latitude":1.28967,"longitude":103.85007,"regionCode":"01"},{"city":"Bangkok","country":"Thailand","countryCode":"TH","id":112506,"latitude":13.75398,"longitude":100.50144,"region":"Bangkok Metropolis","regionCode":"10"},{"city":"Ankara","country":"Turkey","countryCode":"TR","id":37207,"latitude":39.91987,"longitude":32.85427,"region":"Ankara","regionCode":"06"},{"city":"Istanbul","country":"Turkey","countryCode":"TR","id":2985,"latitude":41.01384,"longitude":28.94966,"region":"İstanbul","regionCode":"34"},{"city":"Taipei","country":"Taiwan, Province of China","countryCode":"TW","id":45946,"latitude":25.04776,"longitude":121.53185},{"city":"Kyiv","country":"Ukraine","countryCode":"UA","id":86876,"latitude":50.45466,"longitude":30.5238,"region":"Kiev City","regionCode":"30"},{"city":"Los Angeles","country":"United States","countryCode":"US","id":93831,"latitude":34.05223,"longitude":-118.24368,"region":"California","regionCode":"CA"},{"city":"New York City","country":"United States","countryCode":"US","id":114831,"latitude":40.71427,"longitude":-74.00597,"region":"New York","regionCode":"NY"},{"city":"Caracas","country":"Venezuela, Bolivarian Republic of","countryCode":"VE","id":8723,"latitude":10.48801,"longitude":-66.87919,"region":"Distrito Capital","regionCode":"A"},{"city":"Ho Chi Minh City","country":"Viet Nam","countryCode":"VN","id":38615,"latitude":10.82302,"longitude":106.62965,"region":"Ho Chi Minh","regionCode":"SG"},{"city":"Cape Town","country":"South Africa","countryCode":"ZA","id":23791,"latitude":-33.92584,"longitude":18.42322,"region":"Western Cape","regionCode":"WC"},{"city":"Durban","country":"South Africa","countryCode":"ZA","id":29950,"latitude":-29.8579,"longitude":31.0292,"region":"KwaZulu-Natal","regionCode":"NL"}]

response.each do |city|
  city.delete(:id)
  city.delete(:countryCode)
  city.delete(:region)
  city.delete(:regionCode)
end
response

end


def seed_database
   get_cities.each do |city|
    row = City.create(city)
    row["distance"] = 0
   end
 end
